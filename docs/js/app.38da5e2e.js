(function(t){function e(e){for(var n,i,a=e[0],l=e[1],c=e[2],d=0,f=[];d<a.length;d++)i=a[d],s[i]&&f.push(s[i][0]),s[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(f.length)f.shift()();return r.push.apply(r,c||[]),o()}function o(){for(var t,e=0;e<r.length;e++){for(var o=r[e],n=!0,a=1;a<o.length;a++){var l=o[a];0!==s[l]&&(n=!1)}n&&(r.splice(e--,1),t=i(i.s=o[0]))}return t}var n={},s={app:0},r=[];function i(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=n,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var u=l;r.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"082d":function(t,e,o){"use strict";var n=o("6c33"),s=o.n(n);s.a},"0c5c":function(t,e,o){},1117:function(t,e,o){},2838:function(t,e,o){"use strict";var n=o("564b"),s=o.n(n);s.a},3174:function(t,e,o){},"4ee2":function(t,e,o){},"564b":function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("cadf"),o("551c"),o("097d");var n=o("2b0e"),s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"page-body"},[o("el-scrollbar",{ref:"scrollbar",staticClass:"scroll-page",attrs:{native:!1}},[o("router-view",{staticClass:"router-class"})],1),o("to-top-button",{attrs:{getTarger:t.getScrollTarget}})],1)},r=[],i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("transition",{attrs:{name:"fade"}},[o("el-button",{directives:[{name:"show",rawName:"v-show",value:t.showButton,expression:"showButton"}],attrs:{icon:"el-icon-caret-top",circle:""},on:{click:t.scrollToTop}})],1)},a=[],l={props:{getTarger:{type:Function,default:function(){return document.documentElement}}},data:function(){return{showButton:!1,scrollTop:0,timer:null}},computed:{target:function(){return this.getTarger()},eventerListener:function(){return this.target===document.documentElement?document:this.target}},mounted:function(){this.eventerListener.addEventListener("scroll",this.handleScroll)},beforeDestroy:function(){this.eventerListener.removeEventListener("scroll",this.handleScroll),this.timer&&clearTimeout(this.timer)},methods:{handleScroll:function(){var t=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){var e=t.target.scrollTop;t.showButton=e>.5*t.target.clientHeight},16)},scrollToTop:function(){var t=this.target,e=t.scrollTop,o=e/10;(function n(){if(e>0)return e-=o,t.scrollTo(0,e),setTimeout(n,16)})()}}},c=l,u=(o("082d"),o("2877")),d=Object(u["a"])(c,i,a,!1,null,"fc7cfbf6",null);d.options.__file="ToTopButton.vue";var f=d.exports,m={name:"App",components:{ToTopButton:f},methods:{getScrollTarget:function(){return this.$refs.scrollbar.wrap}}},p=m,g=(o("7faf"),Object(u["a"])(p,s,r,!1,null,null,null));g.options.__file="App.vue";var h=g.exports,v=o("8c4f"),w=o("f499"),b=o.n(w),y=o("2f62"),T="",C={id:"",username:"",name:""};try{localStorage.token&&(T=JSON.parse(localStorage.token)),localStorage.userInfo&&(C=JSON.parse(localStorage.userInfo))}catch(ht){}var _={token:T,userInfo:C};n["default"].use(y["a"]);var k=function(t,e){try{localStorage.setItem(t,b()(e))}catch(ht){}},x={saveToken:function(t,e){t.token=e,k("token",e)},saveUserInfo:function(t,e){t.userInfo=e,k("userInfo",e)}},F={},E=new y["a"].Store({getters:F,state:_,mutations:x}),$=o("5c96"),I=o.n($),j=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-row",{attrs:{type:"flex",justify:"space-around"}},[o("el-col",{attrs:{sm:24,md:20,lg:16}},[o("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"todo-wrapper"},[o("div",{staticClass:"logout-btn"},[o("el-button",{attrs:{type:"danger"},on:{click:t.logout}},[t._v("Logout")])],1),o("el-card",[o("div",{staticClass:" clearfix",attrs:{slot:"header"},slot:"header"},[o("span",{staticClass:"card-title"},[t._v("your Todo-List")]),o("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("add todo")])],1),o("transition-group",{attrs:{tag:"div",name:"el-zoom-in-top"}},t._l(t.todoList,function(e,n){return o("div",{key:e.id,staticClass:"todo-item",on:{mouseenter:function(e){t.showDeleteIndex=n}}},[o("div",{staticClass:"todo-content"},[t._v(t._s(e.title))]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.showDeleteIndex==n,expression:"showDeleteIndex==index"}],staticClass:"edit-btn",on:{click:function(e){t.showEdit(n)}}},[o("i",{staticClass:"el-icon-edit"})]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.showDeleteIndex==n,expression:"showDeleteIndex==index"}],staticClass:"delete-btn",on:{click:function(e){t.confirm(n)}}},[o("i",{staticClass:"el-icon-delete"})])])}),0)],1),o("input-dialog",{attrs:{dialogVisible:t.dialogVisible,modifyContent:t.modifyTodoItem?t.modifyTodoItem.title:""},on:{add:t.commit,modify:t.modify,closeDialog:function(){t.dialogVisible=!1,t.modifyTodoItem=null}}})],1)])],1)},O=[],S=o("cebc"),L=(o("a481"),o("795b")),N=o.n(L),M=o("bc3a"),D=o.n(M),P="todo.lanternfish.ai",B=D.a.create({baseURL:"https://".concat(P),timeout:15e3});B.interceptors.request.use(function(t){return 0!=E.state.token.length&&(t.headers.Authorization="JWT "+E.state.token),t},function(t){return Object($["Message"])({message:"Request timed out",type:"error",center:!0}),N.a.reject(t)}),B.interceptors.response.use(function(t){return t.data},function(t){if(401===t.response.status||403===t.response.status)Object($["Message"])({message:"please login",center:!0,type:"warning"}),gt.replace({path:"/login",query:{redirect:gt.currentRoute.fullPath}});else if(500===t.response.status)return N.a.reject(t.response.data);return N.a.reject(t.response.data)});var A=B,V=function(t){return A.post("/auth",t)},q=function(t){return A.post("/user",t)},J=function(t){return A.get("/user/todo",t)},U=function(t){return A.post("/todo",t)},R=function(t){return A.delete("/todo/"+t)},H=function(t,e){return A.put("/todo/"+t,e)},z=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{staticClass:"input-wrapper",attrs:{title:0==t.modifyContent.length?"Add Todo":"Modify Todo",visible:t.dialogVisible,"close-on-click-modal":!1},on:{open:function(e){t.todoContent=t.modifyContent},close:t.closeDialog}},[o("el-input",{attrs:{type:"textarea",rows:3,clearable:!0,placeholder:"The content length between 1~20!"},model:{value:t.todoContent,callback:function(e){t.todoContent="string"===typeof e?e.trim():e},expression:"todoContent"}}),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:t.closeDialog}},[t._v("cancel")]),o("el-button",{attrs:{type:"primary"},on:{click:t.commitTodo}},[t._v("commit")])],1)],1)},W=[],Y={name:"InputDialog",props:{modifyContent:{type:String,default:""},dialogVisible:{type:Boolean,default:!1}},data:function(){return{todoContent:"",committing:!1}},methods:{commitTodo:function(){if(!this.committing)return this.todoContent.length<1||this.todoContent.length>20?this.$message({message:"The content length between 1~20!",type:"warning",center:!0}):(this.committing=!0,void this.$emit(0==this.modifyContent.length?"add":"modify",this.todoContent))},closeDialog:function(){this.todoContent="",this.$emit("closeDialog"),this.committing=!1}}},G=Y,K=(o("6da2"),Object(u["a"])(G,z,W,!1,null,"53d678e7",null));K.options.__file="InputDialog.vue";var Q=K.exports,X={name:"Home",components:{InputDialog:Q},data:function(){return{loading:!0,dialogVisible:!1,showDeleteIndex:null,modifyTodoItem:null,todoList:[]}},computed:Object(S["a"])({},Object(y["b"])(["token"])),mounted:function(){var t=this;J().then(function(e){t.loading=!1,e&&(t.todoList=e)},function(e){return t.showErrorMessage(e.message)})},methods:{commit:function(t){var e=this;U({title:t}).then(function(t){t&&(e.todoList.push(t),e.dialogVisible=!1,e.$message({message:"successfully added!",type:"success"}))},function(t){return e.showErrorMessage(t.message)})},logout:function(){var t=this;this.$confirm("Are you sure to logout your account?",{type:"warning",cancelButtonText:"cancel",confirmButtonText:"confirm"}).then(function(){t.$store.commit("saveToken",""),t.$router.push("/login")},function(){})},confirm:function(t){var e=this;this.$confirm("Are you sure to delete this item?",{type:"warning",cancelButtonText:"cancel",confirmButtonText:"confirm"}).then(function(){e.deleteTodoById(t)},function(){})},deleteTodoById:function(t){var e=this;R(this.todoList[t].id).then(function(o){o&&e.todoList.splice(t,1)},function(t){return e.showErrorMessage(t.message)})},showEdit:function(t){this.modifyTodoItem=this.todoList[t],this.dialogVisible=!0},modify:function(t){var e=this;H(this.modifyTodoItem.id,{title:t}).then(function(o){console.log(o),e.dialogVisible=!1,e.todoList.splice(e.showDeleteIndex,1,{id:e.modifyTodoItem.id,title:t}),e.modifyTodoItem=null,e.$message({message:"modify successfully!",type:"success"})},function(t){return e.showErrorMessage(t.message)})}}},Z=X,tt=(o("8b4a"),Object(u["a"])(Z,j,O,!1,null,"295aae94",null));tt.options.__file="Home.vue";var et=tt.exports,ot=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-container",{attrs:{direction:"vertical"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.enter("loginForm")}}},[o("el-card",{staticClass:"login-wrapper"},[o("div",{attrs:{slot:"header"},slot:"header"},[o("div",{staticClass:"login-head"},[t._v("Login")])]),o("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:t.loginForm,"label-width":"70px",rules:t.rules}},[o("el-form-item",{attrs:{prop:"userName",label:"Username"}},[o("el-input",{attrs:{autofocus:""},model:{value:t.loginForm.userName,callback:function(e){t.$set(t.loginForm,"userName","string"===typeof e?e.trim():e)},expression:"loginForm.userName"}})],1),o("el-form-item",{attrs:{prop:"password",label:"Password"}},[o("el-input",{attrs:{type:"password"},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1)],1),o("div",{staticClass:"btn-wrap"},[o("el-button",{staticClass:"sign-btn",attrs:{type:"text"},on:{click:t.sign}},[t._v("Sign up now")]),o("el-button",{staticClass:"login-btn",attrs:{type:"success"},on:{click:function(e){t.enter("loginForm")}}},[t._v("Login")])],1),o("p",{staticClass:"tips"},[t._v(t._s(t.tip))])],1)],1)},nt=[],st={name:"Login",data:function(){var t=function(t,e,o){0===e.length?o(new Error("The user name cannot be empty")):o()},e=function(t,e,o){0===e.length?o(new Error("The password cannot be empty")):o()};return{loginForm:{userName:"",password:""},rules:{userName:[{validator:t,trigger:"blur"}],password:[{validator:e,trigger:"blur"}]},tip:""}},methods:{enter:function(t){var e=this;this.tip="";var o=!1;this.$refs[t].validate(function(t){o=t}),o&&V({username:this.loginForm.userName,password:this.loginForm.password}).then(function(t){t.token?(e.$store.commit("saveToken",t.token),e.$message({message:"Congratulations, your login succeeded！",type:"success"}),e.$router.push("/home")):(e.showErrorMessage("login failure,please retry~"),console.log(t))},function(t){e.tip=t.message,e.showErrorMessage(e.tip)})},sign:function(){this.$router.push("/sign")}}},rt=st,it=(o("6cf6"),Object(u["a"])(rt,ot,nt,!1,null,"47f83946",null));it.options.__file="Login.vue";var at=it.exports,lt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-container",{attrs:{direction:"vertical"},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.enter("signForm")}}},[o("el-card",{staticClass:"sign-wrapper"},[o("div",{attrs:{slot:"header"},slot:"header"},[o("div",{staticClass:"sign-head"},[t._v("Sign up")])]),o("el-form",{ref:"signForm",staticClass:"sign-form",attrs:{model:t.signForm,"label-width":"130px",rules:t.rules}},[o("el-form-item",{attrs:{prop:"userName",label:"Username"}},[o("el-input",{attrs:{autofocus:""},model:{value:t.signForm.userName,callback:function(e){t.$set(t.signForm,"userName","string"===typeof e?e.trim():e)},expression:"signForm.userName"}})],1),o("el-form-item",{attrs:{prop:"password1",label:"Password"}},[o("el-input",{attrs:{type:"password"},model:{value:t.signForm.password1,callback:function(e){t.$set(t.signForm,"password1",e)},expression:"signForm.password1"}})],1),o("el-form-item",{attrs:{prop:"password2",label:"Confirm Password"}},[o("el-input",{attrs:{type:"password"},model:{value:t.signForm.password2,callback:function(e){t.$set(t.signForm,"password2",e)},expression:"signForm.password2"}})],1)],1),o("div",{staticClass:"btn-wrap"},[o("el-button",{staticClass:"login-btn",attrs:{type:"text"},on:{click:function(e){t.$router.push("/login")}}},[o("i",{staticClass:"el-icon-arrow-left"}),t._v("Return to the login")]),o("el-button",{staticClass:"sign-btn",attrs:{type:"primary"},on:{click:function(e){t.commit("signForm")}}},[t._v("Create an account")])],1),o("p",{staticClass:"tips"},[t._v(t._s(t.tip))])],1)],1)},ct=[],ut={name:"Sign",data:function(){var t=this,e=function(t,e,o){0===e.length?o(new Error("The user name cannot be empty")):e.length<5||e.length>12?o(new Error("Username length between 5 and 12!")):o()},o=function(e,o,n){""===o?n(new Error("Please enter your password")):o.length<8||o.length>20?n(new Error("Password length between 8~20!")):(""!==t.signForm.password2&&t.$refs.signForm.validateField("password2"),n())},n=function(e,o,n){""===o?n(new Error("Please enter your password again")):o.length<8||o.length>20?n(new Error("Password length between 8~20!")):o!==t.signForm.password1?n(new Error("The two passwords do not match!")):n()};return{signForm:{userName:"",password1:"",password2:""},rules:{userName:[{validator:e,trigger:"blur"}],password1:[{validator:o,trigger:"blur"}],password2:[{validator:n,trigger:"blur"}]},tip:""}},methods:{commit:function(t){var e=this;this.tip="";var o=!1;this.$refs[t].validate(function(t){o=t}),o&&q({username:this.signForm.userName,password:this.signForm.password1,name:"lanternyin"}).then(function(t){t.id||t.username?(e.$message({message:"registered successfully，please login！",type:"success"}),e.$router.push("/login")):(e.showErrorMessage("fail to register，please retry~"),console.log(t))},function(t){e.tip="fail to register，".concat(t.message),e.showErrorMessage(e.tip)})}}},dt=ut,ft=(o("2838"),Object(u["a"])(dt,lt,ct,!1,null,"6aa1ae2a",null));ft.options.__file="Sign.vue";var mt=ft.exports;n["default"].use(v["a"]);var pt=new v["a"]({routes:[{path:"/",redirect:"/home"},{path:"/home",name:"home",component:et,meta:{requireAuth:!0}},{path:"/login",name:"login",component:at,meta:{requireAuth:!1}},{path:"/sign",name:"sign",component:mt,meta:{requireAuth:!1}},{path:"*",redirect:"/"}]});pt.beforeEach(function(t,e,o){if(t.meta.requireAuth){if(0==E.state.token.length)return Object($["Message"])({message:"Please log in!",type:"warning"}),o({path:"/login",query:{redirect:t.fullPath}});o()}else{if("/login"==t.path&&0!=E.state.token.length)return Object($["Message"])({message:"You have logged in successfully!",type:"success"}),o({path:"/home"});o()}});var gt=pt;o("4ee2"),o("3174"),o("0fae");n["default"].use(I.a),n["default"].prototype.showErrorMessage=function(t){t&&I.a.Message({showClose:!0,message:t,type:"error",center:!0})},new n["default"]({router:gt,store:E,render:function(t){return t(h)}}).$mount("#app")},"6c33":function(t,e,o){},"6cf6":function(t,e,o){"use strict";var n=o("1117"),s=o.n(n);s.a},"6da2":function(t,e,o){"use strict";var n=o("bd88"),s=o.n(n);s.a},"7faf":function(t,e,o){"use strict";var n=o("8fba"),s=o.n(n);s.a},"8b4a":function(t,e,o){"use strict";var n=o("0c5c"),s=o.n(n);s.a},"8fba":function(t,e,o){},bd88:function(t,e,o){}});
//# sourceMappingURL=app.38da5e2e.js.map